#summary Namecheap.com WHMCS SSL Module (SSL Plugin)

= Namecheap.com WHMCS SSL Module (v 1.4.1) =

----
* Note:*_ This version is fully compatible with 5.2.x versions of WHMCS._
----
===Updated on November 1, 2013 to Version 1.4.1===
  * Added possibility to reissue Symantec certificates from WHMCS interface.
  * Added possibility to use HTTP-based validation instead of approval email.
  * Added possibility to download certificate from WHMCS user area.
  * Added additional checks for API responses.
  * Added Whois emails to list of addresses for Domain Control Validation.
  * Fixed uninformative error message ‘Invalid Phone or Country code’.
  * Fixed dependence of module language upon language choice in WHMCS
  * Minor fixes.

===Updated on November 15, 2013 to Version 1.4.2===
  * Fixed bug related to ‘Invalid Link Followed’ error  (Addon updated to version 1.3)


[http://code.google.com/p/namecheap/wiki/ReleaseNotesForWHMCSSSL Release Notes]

===Before you begin===

Namecheap.com SSL module for WHMCS is an open-source plugin that is distributed free of charge. This module allows you to automate SSL Certificate sales with the Namecheap platform.

====Pre-requisites====
  * Access to WHMCS admin area.
  * An understanding of [http://www.namecheap.com/support/api/api.aspx Namecheap’s environments].
  * Namecheap account with API access enabled on the desired environment.

====List of supported SSL certificates:====

You will be allowed to resell all of our SSL products: 

*!GeoTrust Cerificates:*

  * RapidSSL
  * RapidSSL Wildcard
  * !GeoTrust QuickSSL
  * !GeoTrust QuickSSL Premium
  * !GeoTrust True BusinessID with EV
  * !GeoTrust TrueBusinessID
  * !GeoTrust TrueBusinessID !WildCard

*Comodo Certificates:*

  * Comodo PositiveSSL
  * Comodo PositiveSSL Wildcard
  * Comodo InstantSSL
  * Comodo InstantSSL Pro 
  * Comodo PremiumSSL
  * Comodo PremiumSSL Wildcard 
  * Comodo EssentialSSL 
  * Comodo EssentialSSL Wildcard
  * Comodo EV SSL
  * Comodo EV SGC SSL 

*!VeriSign Certificates:*

  * !VeriSign Secure Site
  * !VeriSign Secure Site Pro
  * !VeriSign Secure Site EV
  * !VeriSign Secure Site Pro EV

*Thawte Certificates:*

  * SSL 123
  * Web Server
  * Web Server EV
  * Supercert

----
*Important Note:*

_You may find ComodoSSL in the list of SSLs while setting up products in WHMCS. ComodoSSL is a test product, it is included in the list of products, but it is not fully supported yet. Please do not set up ComodoSSL Products._

----


=== Sandbox and Production Environments===

Namecheap has a production as well as a test server environment. The test server environment is called Sandbox. We urge you to test the module in our [http://www.sandbox.namecheap.com/ sandbox environment], before pointing it to production. It uses same calls as our production environment except that you will not receive actual SSL product in the end of the process and will not be charged real money. Difference between setting product for Sandbox and for production will be described in "Setting up products and pricings" section.

====List of certificates supported in Sandbox:====
 
All of our certificates are supported in sandbox:


*!GeoTrust Cerificates:*
  * RapidSSL
  * RapidSSL Wildcard
  * !GeoTrust QuickSSL
  * !GeoTrust QuickSSL Premium
  * !GeoTrust True BusinessID with EV
  * !GeoTrust TrueBusinessID
  * !GeoTrust TrueBusinessID !WildCard

*!VeriSign Certificates:*
  * !VeriSign Secure Site
  * !VeriSign Secure Site Pro
  * !VeriSign Secure Site EV
  * !VeriSign Secure Site Pro EV

*Thawte Certificates:*
  * SSL 123
  * Web Server
  * Web Server EV

*Comodo Certificates:*
  * Comodo PositiveSSL
  * Comodo PositiveSSL Wildcard
  * Comodo InstantSSL
  * Comodo InstantSSL Pro 
  * Comodo PremiumSSL
  * Comodo PremiumSSL Wildcard
  * Comodo EssentialSSL
  * Comodo EssentialSSL Wildcard

---
*Important Note:*

Please note that activation of Comodo OV and EV certificates will not lead to receiving test certificate itself, only DCV email will be sent.

---

===Download and installation===

Installation of our SSLmodule is very simple and takes just a few minutes:

1. Download and extract attached archive. It can be downloaded here: [https://code.google.com/p/namecheap/downloads/list].  Copy the contents to the root folder of whmcs (folder structure will remain the same).  

2. Go to 'Setup >Addon Modules' in your WHMCS Admin area and activate the addon. Then go here:

[http://files.namecheap.com/images/googlecode/ssl-module-addon-installation.png]

The SSL Module Addon installation is now complete.
----
Important Note: 

If you receive any errors or cannot access addon please set up access permissions to addon for everyone as on screenshot: 

[http://files.namecheap.com/images/googlecode/Access%20Rights.png]
 
----
===Setting up products and pricings===

To setup an SSL certificate product, please follow the steps below:

1. Create a new product within your WHMCS.

2. Ensure the welcome email is set to "None" in the dropdown menu on the Details tab, as the module sends its own email.

3. In this version, the module billing cycles and SSL validity period are configured via standard WHMCS “Products/Services” settings. To access this, go to the Pricing tab and select Payment Type to Recurring. Now disable _“One Time/Monthly”_, _“Quarterly”_ and _“Semi-Annualy”_ billing cycles since they are not applicable to SSL Certificates. Finally, specify prices for remaining billing cycles. _“Annually”_ corresponds to 1 year of SSL certificate validity (i.e. the SSL will be registered for 1 year). Biennially and triennially refer to 2 and 3 years respectively.

[http://files.namecheap.com/images/googlecode/Product-Settings.png]

 
4. On the _Module Settings_ tab, choose _"Namecheapssl"_ from Module Name dropdown menu.

5. Enter your API credentials. If you wish to test this module in sandbox environment, make sure to enter your sandbox username, sandbox API key in the corresponding text fields. Also, be sure to check the _“Test Mode”_ box.

6. Choose the certificate type from the drop-down menu.

7. If you have a special _“Promotion Code”_, type it into the corresponding text field.

8. If _“Use existing SSL from account”_ option is checked we will try to use an existing SSL certificate of this type from your Namecheap account first. If there is no SSL available that can be used, a new certificate will be purchased.

9. The purpose of the next set of fields is to customize the Technical Contact Details for any purchased SSL Certificates (fields are shown on a screens shot below). By default, Namecheap Contact details are used (email address sslsupport@namecheap.com). Using a custom Technical Contact Details is useful for resellers who wish to appear as an independent business entity to their customers. Depending on whether you want to use custom Technical Contact Details or not, perform the corresponding action:
  * In order to use *Default Technical Email* leave ALL of the fields below empty.
  * If you wish to use *Custom Technical Email* fill in ALL of the fields below.

http://files.namecheap.com/images/googlecode/Customizing-TechnicalContacts.png
 
Note: Our ability to provide support to customers who use custom Technical Contact Fields is limited. In case custom technical contact details are used, we cannot perform reissues, resending of approver email/ certificate, or cancellation/revocation of GeoTrust and VeriSign SSL Certificates. However, since you possess control over technical contact, you can access GeoTrust/VeriSign Live Account and perform these required actions yourself.

For control of !GeoTrust SSLs, please visit: https://products.geotrust.com/orders/orderinformation/authentication.do

For control of !VeriSign SSLs, please visit: https://products.verisign.com/orders/orderinformation/authentication.do

*Order Process*

The product will appear in the order process as a regular product which can be added to the cart. No configuration is performed before purchase. Once a certificate is purchased, paid for, and activated, the user is sent an email containing a link which takes them to configure the certificate in the client area. Once all details have been provided, the configuration data is sent to the Certificate Authority for validation. No manual intervention is required from you.

You have an option to resend an email containing a link to the certificate configuration page to the client. This page is also accessible from the client area (My Products & Services -> Product Details -> View Certificate Details). Options to resend approver email and email with the certificate issued are also available in the client area.

*Welcome/Configuration Email*

On its first launch, Namecheap SSL module automatically creates a configuration email template (see “SSL Certificate Configuration Required” in section "Product Messages" of Email Templates in Setup). It contains link to activation process inside your client area for a specific SSL certificate.

Sending of SSL Configuration Email is controlled by the following parameters:

Type of product setup behavior in Module Settings tab:

[http://files.namecheap.com/images/googlecode/Module-Settings.png]
 

1. Configuration email is always sent for options “Automatically setup the product as soon as an order is placed” and “Automatically setup the product as soon as the first payment is received”. If you select “Automatically setup the product as soon as an order is placed”, a configuration email will only be sent if the order is placed from the client area. The module itself will run only if you place the order from client area as well.

2. If the options “Automatically setup the product when you manually accept a pending order” or “Do not automatically setup this product” are selected, then sending of the Configuration Email will depend on the box “Send Welcome Email”:

[http://files.namecheap.com/images/googlecode/Welcome-Email-Setting.png]
 

You can modify content of the configuration email at any time.

=== Activation from WHMCS ===

In order to activate a certificate purchased from you, your client needs to access list of your services and click on ‘View Details’ button next to ordered certificate.

[http://files.namecheap.com/images/googlecode/View-Certificate-Details.png]
 

After that your client needs to click ‘View certificate details’ and ‘Configure certificate’.

He will see window with SSL activation fields: 

[http://files.namecheap.com/images/googlecode/Configuring-SSL-Certificate.png] 

At this stage your client needs to input CSR code (obtained from web-server), select web-server type and fill in valid admin contact info.

Basically admin contact info is to be pre-filled from user's WHMCS profile.

Then your customer clicks 'Proceed' and gets to next step.

In case CSR code is ok, your client will see the list of available DCV options on the next page.Those DCV options are basically HTTP-based validation or approval email. Your client may select any of emails there to receive Domain Control Validation email on that address or select HTTP-based DCV. In case HTTP-based DCV radiobutton is selected no email is to be sent for validation, however your customer will need to submit a specific file to root folder of his domain. 
Name and contents of file will be shown after he clicks ‘Submit’ and activation data gets transmitted to Certificate Authority. Also the file contents can be checked in customer’s area by viewing information of certificate that is being activated.

Further activation process is between you or your customer and Certificate Authority. You are to receive approval email (for most certificates except Symantec OV and EV certs) and to approve it. After that certificate is to be sent to you (within 10-15 mins) or some docs request is to be sent to you for OV or EV certs.

----
*Important Note:*

Language variables containing strings with instructions to HTTP-based validation and with file contents are stored in /modules/servers/namecheapssl/lang/English.php. If you are using other language you need to create 
/modules/servers/namecheapssl/lang/%yourlanguage%.php and change values of the following variables to corresponding phrases in your language: $_MOD_LANG['ncssl_http_based_validation'] ,$_MOD_LANG['ncssl_show_validation_file_contents'] , $_MOD_LANG['ncssl_custom_phrase_sslcertapproveremaildetails'],$_MOD_LANG['ncssl_custom_phrase_sslconfigcompletedetails']
----

=== Debugging and Addon functions===

Our Namecheap SSL Module addon has the following functions:
  * Log
  * Link/Re-Link WHMCS cert ID to NC Cert ID
  * Certificate list

Log

While setting product you may check ‘Debug mode’ box in order to have your actions with module logged: 
 
This will allow you to check log of actions performed by module in addons section in WHMCS:

[http://files.namecheap.com/images/googlecode/Enabling-Log.png]

There you will find all of the actions performed by your customer with namecheapssl products, all hook actions and all API calls and responses. This is very convenient for investigation of possible issues.

Each action will have WHMCS service ID of certificate that was viewed/activated/reissued from WHMCS user area so you will be able to track actions of your customers.

*Link/Re-Link WHMCS Cert ID to NC Cert ID*

This feature allows connecting WHMCS certificate record to existing Namecheap certificate.

For this you will need to input WHMCS invoice ID given after order placement to corresponding box and then to input certID of an existing certificate within your NC account (can be found next to certificate in list of SSLs at Namecheap).

After clicking ‘Sync’ details for specific certificate in your WHMCS will be taken from Namecheap.


*Certificate List*

In this section you may see all of the certificates ordered via this WHMCS from all of the NC accounts associated with it.

You will see the following fields in the lists:

[http://files.namecheap.com/images/googlecode/Certificate-list.png]									
									

===Reissue and renewal===

Reissue and renewal are 2 different actions with SSL certificate.

After the certificate gets issued, it's status becomes ‘active’ and you will see the following screen while viewing it’s info:

[http://files.namecheap.com/images/googlecode/Reissuing-Cerificate.png]

There you may download certificate in zip archive in corresponding format for your web-server or reissue the certificate.

*Reissue*

Reissue is the process of having certificate regenerated with Certificate Authority if needed. For example, if your client has lost your Private Key. For that he needs to view details of your certificate from list of certificates in WHMCS user area and click ‘Reissue Certificate’ button:

Further process will be very similar to activation – your customer will need to paste CSR for the same domain name and select approval email. Reissuing a certificate will change its Namecheap Certificate ID. A new certificate record will be added to your Namecheap account.

*Due date and reissue state synchronization*

All changes done in WHMCS are synchronized with your Namecheap account automatically once a day (when WHMCS cron runs). Also you can perform manual synchronization any time by clicking ‘Synchronize with Namecheap’. This will set WHMCS due dates and reissue states in sync with Namecheap admin area when needed:

[http://files.namecheap.com/images/googlecode/Sync-duedate-reissuestatus.png]

*Renewal* is pretty much the same as purchasing new certificate with Namecheap. Renewal functionality is fully integrated into the module. As long as you have “Payment Type” set to “Recurring” when creating a product, invoices for renewals will be generated automatically. Once paid, renewal SSLs will be created automatically as well. Please keep in mind that after the renewal SSL is created, it still requires activation using [http://namecheap.simplekb.com/kb.show?show=article&articleid=817&categoryid=71 CSR].


===FAQ===

*Q:* I cancel certificate and nothing happens

*A:* Cancellation is being performed only in your WHMCS, but not in our system. Please submit a cancellation request with our SSL support team for certificate to be revoked and refunded


*Q:* Does your module have multi-language support?

*A:* Yes, multi-language is fully integrated with WHMCS so you may change the default language of your WHMCS and language will be changed for fields used in module as well. Please note that you will need to create a custom %yourlanguage%.php file in lang directory at modules/servers/namecheapssl/lang for some fields to be translated as well. You may use default English.php as translation template.

*Q:* Getting “ _[2010167]_ Parameter Years is Missing” error while accepting order.

*A:* This error usually occurs when Pricing is set up improperly for your SSL product. Please doublecheck that Payment type is set to ‘Recurring’ and there is ‘-1’ input in ‘Monhtly, Quarterly, and Semi-Anually’ fields to disable possibility of ordering SSL for terms less than a year as SSL certificates can only be ordered and issued for a whole number of years only. 

*Q:* I am receiving ''['" or any other strange characters instead or error messages while activation of my renewal certificate

*A:* This is a known bug, our developers are currently investigating it. In case you face this issue please email details to sslsupport@namecheap.com and kindly purchase and activate renewal certificate manually from Namecheap if renewal is urgent. After purchasing certificate manually you will need to sync the IDs using  ‘Link/Re-Link WHMCS Cert ID to NC Cert ID’  addon function.